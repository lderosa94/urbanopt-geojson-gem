{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "http://json-schema.org/openstudio-urban-modeling/district_system_properties.json#",
  "title": "URBANopt Electrical Line",
  "description": "Schema for an URBANopt Electrical Line object",
  "type": "object",
  "properties": {
    "id": {
      "description": "Unique id used to refer to this feature within this dataset.",
      "type": "string"
    },
    "project_id": {
      "description": "Project which this feature belongs to.",
      "type": "string"
    },
    "type": {
      "description": "Type of feature.",
      "type": "string",
      "enum": [
        "ElectricalLine"
      ]
    },
    "source_name": {
      "description": "Name of the original data source.",
      "type": "string"
    },
    "source_id": {
      "description": "Id of the feature in original data source.",
      "type": "string"
    },
    "name": {
      "description": "Feature name",
      "type": "string"
    },
    "connector_type": {
      "$ref": "#/definitions/ElectricalLineType"
    },
    "lengths": {
      "description": "Length (ft) of each segment, generated on export.",
      "type": "array",
      "items": {
        "type": "number"
      }
    },
    "total_length": {
      "description": "Total length (ft) of the line, generated on export.",
      "type": "number"
    },
    "start_junction_id": {
      "description": "Id of the junction that this line starts at.",
      "type": "string"
    },
    "line_properties":{
        "description": "A sub-element containing all the attributes that can be assigned to a line, including wires",
        "type":"object",
        "properties":{

            "is_switch":{"type":"boolean","description":"Flag indicating if the line is a switch or not"},
            "is_fuse":{"type":"boolean","description":"Flag indicating if the line is a fuse or not"},
            "is_open":{"type":"boolean","description":"Flag indicating if the switch/fuse is a open or not"},
            "wire_1":{ "$ref": "#/definitions/wire"},
            "wire_2":{ "$ref": "#/definitions/wire"},
            "wire_3":{ "$ref": "#/definitions/wire"},
            "wire_4":{ "$ref": "#/definitions/wire"}
        }
    },

    "wire_1":{
        "description": "First wire of the line",
        "$ref": "#/definitions/WireType",
        "type": "string"
    },

    "wire_2":{
        "description": "Second wire of the line",
        "$ref": "#/definitions/WireType",
        "type": "string"
    },

    "wire_3":{
        "description": "Third wire of the line",
        "$ref": "#/definitions/WireType",
        "type": "string"
    },

    "wire_4":{
        "description": "Fourth wire of the line",
        "$ref": "#/definitions/WireType",
        "type": "string"
    },


    "end_junction_id": {
      "description": "Id of the junction that this line ends at.",
      "type": "string"
    },
    "user_data": {
      "description": "Arbitrary user data"
    }
  },
  "required": [
    "type",
    "id",
    "connector_type",
    "start_junction_id",
    "end_junction_id"
  ],
  "additionalProperties": false,
  "definitions": {
    "ElectricalLineType": {
      "description": "Type of electrical line",
      "type": "string",
      "enum": [
        "Line"
      ]
    },
    "WireType": {
      "description": "Type of wire used",
      "type": "string",
      "enum": [
        "OH TPLX #4",
        "OH TPLX 1/0",
        "OH TPLX 2/0",
        "OH TPLX 4/0",
        "OH AL #2",
        "OH AL #4",
        "OH AL 1/0",
        "OH AL 2/0",
        "OH AL 4/0",
        "OH AL 336kcmil",
        "OH AL 477kcmil",
        "OH AL 795kcmil",
        "UG TPLX #4",
        "UG TPLX 1/0",
        "UG TPLX 2/0",
        "UG TPLX 4/0",
        "UG AL #2",
        "UG AL #4",
        "UG AL 1/0",
        "UG AL 2/0",
        "UG AL 4/0",
        "UG AL 350kcmil",
        "UG AL 500kcmil",
        "UG AL 750kcmil",
        "UG AL 1000kcmil"

      ]
    },

    "wire":{"type":"object", "description":"A wire object with the full array of properties",
        "properties":{
            "phase":{"type":"string", "enum":["A","B","C","N","S1","S2"], "description":"Phase of wire number 1 (A,B,C,S1,S2 or N)."},
            "nameclass":{"type":"string", "description": "The nameclass (e.g. UG AL 1/0) of the wire","$ref":"#/definitions/WireType"},
            "height":{"description": "Height of wire 1 in feet. Negative if underground", "type": "number"},
            "x":{"description": "Horizontal displacement of wire 1 in feet.", "type": "number"},
            "resistance":{"description": "Total resistance of the wire", "type":"number"},
            "ampacity":{"description": "ampacity rating of the wire under normal circumstancse", "type":"number"},
            "diameter":{"description": "diameter of the conductor if it's a concentric neutral cable", "type":"number"},
            "gmr":{"description": "gmr of the wire. gmr of the conductor if it's a concentric neutral cable", "type":"number"},
            "concentric_neutral_gmr":{"description": "The concentric neutral gmr", "type":"number"},
            "concentric_neutral_resistance":{"description": "The concentric neutral resistance", "type":"number"},
            "concentric_neutral_diameter":{"description": "The concentric neutral diameter", "type":"number"},
            "concentric_neutral_nstrand":{"description": "The concentric neutral number of strands", "type":"number"},
            "concentric_neutral_outside_diameter":{"description": "The concentric neutral outside diameter", "type":"number"}

        }
    }
}
